{"version":3,"file":"orders.js","sources":["/home/carter/Documents/Code/take-out-2/app/static/js/es6/orders.es6.js"],"names":[],"mappings":"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","sourcesContent":["/* jshint unused: false */\n/* global main */\n\n'use strict';\n\n$(function()\n{\n  $('form.order').on('change', 'select.menu', getMenu);\n  $('form.order').on('change', 'select.dish', updateProperties);\n  $('form.order').on('click', 'button.remove', removeRow);\n  $('form.order').on('input', 'input', updateProperties);\n  $('#add').click(addRow);\n\n  function updateTotal()\n  {\n    var total = 0;\n    $('.price').each((i, priceDom)=>\n    {\n      var $price = $(priceDom);\n      total += $price.text().replace(/[^\\.\\d]/g,'')*1;\n    });\n\n    $('.total').text('$'+total.toFixed(2));\n  }\n\n  function updateProperties()\n  {\n    var $row = $(this).parents('.menu-item');\n\n    var $quantity = $row.find('.quantity');\n    var quantity = $quantity.val().replace(/[^\\d]/g,'');\n    quantity = main.clamp(quantity, 0, 999);\n    quantity = (quantity) ? quantity * 1 : '';\n    $quantity.val(quantity);\n\n    var price = $row.find('.dish > option:selected').data('cost') * 1;\n    var calories = $row.find('.dish > option:selected').data('calories') * 1;\n\n    var totalPrice = (quantity * price);\n    var totalCalories = (quantity * calories);\n\n    totalPrice = (totalPrice) ? totalPrice.toFixed(2) : '0.00';\n    totalCalories = (totalCalories) ? totalCalories.toFixed() : '0';\n\n    $row.find('.price').text('$'+totalPrice);\n    $row.find('.calories').text(totalCalories + ' cal');\n\n    updateTotal();\n  }\n\n  function removeRow(ev)\n  {\n    if($('.menu-item').length > 1)\n    {\n      var $row = $(this).parents('.menu-item');\n      $row.remove();\n    }\n\n    updateTotal();\n\n    ev.preventDefault();\n  }\n\n  function addRow(ev)\n  {\n    var $row = $('form.order .menu-items > .menu-item:first-child').clone();\n\n    $row.find('.quantity').val(1);\n\n    var $menuItems = $('form.order .menu-items');\n    $menuItems.append($row);\n\n    $menuItems.find('select.dish').trigger('change');\n\n    ev.preventDefault();\n  }\n\n  function getMenu()\n  {\n    var $menuSelect = $(this);\n    var menu = $menuSelect.val();\n\n    main.ajax(`/dishes/${menu}`, 'GET', {}, h=>\n    {\n      var $dishSelect = $menuSelect.parents('.menu-item').find('select.dish');\n\n      $dishSelect.html(h);\n\n      $dishSelect.trigger('change');\n    });\n  }\n});"]}